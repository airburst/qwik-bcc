var se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ue={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(se,function(){var r=1e3,n=6e4,i=36e5,a="millisecond",u="second",o="minute",s="hour",h="day",l="week",p="month",f="quarter",y="year",g="date",d="Invalid Date",T=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,N={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(E){var b=["th","st","nd","rd"],v=E%100;return"["+E+(b[(v-20)%10]||b[v]||b[0])+"]"}},_=function(E,b,v){var w=String(E);return!w||w.length>=b?E:""+Array(b+1-w.length).join(v)+E},X={s:_,z:function(E){var b=-E.utcOffset(),v=Math.abs(b),w=Math.floor(v/60),m=v%60;return(b<=0?"+":"-")+_(w,2,"0")+":"+_(m,2,"0")},m:function E(b,v){if(b.date()<v.date())return-E(v,b);var w=12*(v.year()-b.year())+(v.month()-b.month()),m=b.clone().add(w,p),D=v-m<0,M=b.clone().add(w+(D?-1:1),p);return+(-(w+(v-m)/(D?m-M:M-m))||0)},a:function(E){return E<0?Math.ceil(E)||0:Math.floor(E)},p:function(E){return{M:p,y,w:l,d:h,D:g,h:s,m:o,s:u,ms:a,Q:f}[E]||String(E||"").toLowerCase().replace(/s$/,"")},u:function(E){return E===void 0}},F="en",I={};I[F]=N;var nt="$isDayjsObject",vt=function(E){return E instanceof Tt||!(!E||!E[nt])},it=function E(b,v,w){var m;if(!b)return F;if(typeof b=="string"){var D=b.toLowerCase();I[D]&&(m=D),v&&(I[D]=v,m=D);var M=b.split("-");if(!m&&M.length>1)return E(M[0])}else{var L=b.name;I[L]=b,m=L}return!w&&m&&(F=m),m||!w&&F},C=function(E,b){if(vt(E))return E.clone();var v=typeof b=="object"?b:{};return v.date=E,v.args=arguments,new Tt(v)},Y=X;Y.l=it,Y.i=vt,Y.w=function(E,b){return C(E,{locale:b.$L,utc:b.$u,x:b.$x,$offset:b.$offset})};var Tt=function(){function E(v){this.$L=it(v.locale,null,!0),this.parse(v),this.$x=this.$x||v.x||{},this[nt]=!0}var b=E.prototype;return b.parse=function(v){this.$d=function(w){var m=w.date,D=w.utc;if(m===null)return new Date(NaN);if(Y.u(m))return new Date;if(m instanceof Date)return new Date(m);if(typeof m=="string"&&!/Z$/i.test(m)){var M=m.match(T);if(M){var L=M[2]-1||0,$=(M[7]||"0").substring(0,3);return D?new Date(Date.UTC(M[1],L,M[3]||1,M[4]||0,M[5]||0,M[6]||0,$)):new Date(M[1],L,M[3]||1,M[4]||0,M[5]||0,M[6]||0,$)}}return new Date(m)}(v),this.init()},b.init=function(){var v=this.$d;this.$y=v.getFullYear(),this.$M=v.getMonth(),this.$D=v.getDate(),this.$W=v.getDay(),this.$H=v.getHours(),this.$m=v.getMinutes(),this.$s=v.getSeconds(),this.$ms=v.getMilliseconds()},b.$utils=function(){return Y},b.isValid=function(){return this.$d.toString()!==d},b.isSame=function(v,w){var m=C(v);return this.startOf(w)<=m&&m<=this.endOf(w)},b.isAfter=function(v,w){return C(v)<this.startOf(w)},b.isBefore=function(v,w){return this.endOf(w)<C(v)},b.$g=function(v,w,m){return Y.u(v)?this[w]:this.set(m,v)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(v,w){var m=this,D=!!Y.u(w)||w,M=Y.p(v),L=function(ft,K){var at=Y.w(m.$u?Date.UTC(m.$y,K,ft):new Date(m.$y,K,ft),m);return D?at:at.endOf(h)},$=function(ft,K){return Y.w(m.toDate()[ft].apply(m.toDate("s"),(D?[0,0,0,0]:[23,59,59,999]).slice(K)),m)},R=this.$W,H=this.$M,B=this.$D,ct="set"+(this.$u?"UTC":"");switch(M){case y:return D?L(1,0):L(31,11);case p:return D?L(1,H):L(0,H+1);case l:var ut=this.$locale().weekStart||0,mt=(R<ut?R+7:R)-ut;return L(D?B-mt:B+(6-mt),H);case h:case g:return $(ct+"Hours",0);case s:return $(ct+"Minutes",1);case o:return $(ct+"Seconds",2);case u:return $(ct+"Milliseconds",3);default:return this.clone()}},b.endOf=function(v){return this.startOf(v,!1)},b.$set=function(v,w){var m,D=Y.p(v),M="set"+(this.$u?"UTC":""),L=(m={},m[h]=M+"Date",m[g]=M+"Date",m[p]=M+"Month",m[y]=M+"FullYear",m[s]=M+"Hours",m[o]=M+"Minutes",m[u]=M+"Seconds",m[a]=M+"Milliseconds",m)[D],$=D===h?this.$D+(w-this.$W):w;if(D===p||D===y){var R=this.clone().set(g,1);R.$d[L]($),R.init(),this.$d=R.set(g,Math.min(this.$D,R.daysInMonth())).$d}else L&&this.$d[L]($);return this.init(),this},b.set=function(v,w){return this.clone().$set(v,w)},b.get=function(v){return this[Y.p(v)]()},b.add=function(v,w){var m,D=this;v=Number(v);var M=Y.p(w),L=function(H){var B=C(D);return Y.w(B.date(B.date()+Math.round(H*v)),D)};if(M===p)return this.set(p,this.$M+v);if(M===y)return this.set(y,this.$y+v);if(M===h)return L(1);if(M===l)return L(7);var $=(m={},m[o]=n,m[s]=i,m[u]=r,m)[M]||1,R=this.$d.getTime()+v*$;return Y.w(R,this)},b.subtract=function(v,w){return this.add(-1*v,w)},b.format=function(v){var w=this,m=this.$locale();if(!this.isValid())return m.invalidDate||d;var D=v||"YYYY-MM-DDTHH:mm:ssZ",M=Y.z(this),L=this.$H,$=this.$m,R=this.$M,H=m.weekdays,B=m.months,ct=m.meridiem,ut=function(K,at,bt,Et){return K&&(K[at]||K(w,D))||bt[at].slice(0,Et)},mt=function(K){return Y.s(L%12||12,K,"0")},ft=ct||function(K,at,bt){var Et=K<12?"AM":"PM";return bt?Et.toLowerCase():Et};return D.replace(S,function(K,at){return at||function(bt){switch(bt){case"YY":return String(w.$y).slice(-2);case"YYYY":return Y.s(w.$y,4,"0");case"M":return R+1;case"MM":return Y.s(R+1,2,"0");case"MMM":return ut(m.monthsShort,R,B,3);case"MMMM":return ut(B,R);case"D":return w.$D;case"DD":return Y.s(w.$D,2,"0");case"d":return String(w.$W);case"dd":return ut(m.weekdaysMin,w.$W,H,2);case"ddd":return ut(m.weekdaysShort,w.$W,H,3);case"dddd":return H[w.$W];case"H":return String(L);case"HH":return Y.s(L,2,"0");case"h":return mt(1);case"hh":return mt(2);case"a":return ft(L,$,!0);case"A":return ft(L,$,!1);case"m":return String($);case"mm":return Y.s($,2,"0");case"s":return String(w.$s);case"ss":return Y.s(w.$s,2,"0");case"SSS":return Y.s(w.$ms,3,"0");case"Z":return M}return null}(K)||M.replace(":","")})},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(v,w,m){var D,M=this,L=Y.p(w),$=C(v),R=($.utcOffset()-this.utcOffset())*n,H=this-$,B=function(){return Y.m(M,$)};switch(L){case y:D=B()/12;break;case p:D=B();break;case f:D=B()/3;break;case l:D=(H-R)/6048e5;break;case h:D=(H-R)/864e5;break;case s:D=H/i;break;case o:D=H/n;break;case u:D=H/r;break;default:D=H}return m?D:Y.a(D)},b.daysInMonth=function(){return this.endOf(p).$D},b.$locale=function(){return I[this.$L]},b.locale=function(v,w){if(!v)return this.$L;var m=this.clone(),D=it(v,w,!0);return D&&(m.$L=D),m},b.clone=function(){return Y.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},E}(),zt=Tt.prototype;return C.prototype=zt,[["$ms",a],["$s",u],["$m",o],["$H",s],["$W",h],["$M",p],["$y",y],["$D",g]].forEach(function(E){zt[E[1]]=function(b){return this.$g(b,E[0],E[1])}}),C.extend=function(E,b){return E.$i||(E(b,Tt,C),E.$i=!0),C},C.locale=it,C.isDayjs=vt,C.unix=function(E){return C(1e3*E)},C.en=I[F],C.Ls=I,C.p={},C})})(ue);var we=ue.exports;const It=oe(we);var fe={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(se,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(a,u,o){var s=u.prototype;o.utc=function(d){var T={date:d,utc:!0,args:arguments};return new u(T)},s.utc=function(d){var T=o(this.toDate(),{locale:this.$L,utc:!0});return d?T.add(this.utcOffset(),r):T},s.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var h=s.parse;s.parse=function(d){d.utc&&(this.$u=!0),this.$utils().u(d.$offset)||(this.$offset=d.$offset),h.call(this,d)};var l=s.init;s.init=function(){if(this.$u){var d=this.$d;this.$y=d.getUTCFullYear(),this.$M=d.getUTCMonth(),this.$D=d.getUTCDate(),this.$W=d.getUTCDay(),this.$H=d.getUTCHours(),this.$m=d.getUTCMinutes(),this.$s=d.getUTCSeconds(),this.$ms=d.getUTCMilliseconds()}else l.call(this)};var p=s.utcOffset;s.utcOffset=function(d,T){var S=this.$utils().u;if(S(d))return this.$u?0:S(this.$offset)?p.call(this):this.$offset;if(typeof d=="string"&&(d=function(F){F===void 0&&(F="");var I=F.match(n);if(!I)return null;var nt=(""+I[0]).match(i)||["-",0,0],vt=nt[0],it=60*+nt[1]+ +nt[2];return it===0?0:vt==="+"?it:-it}(d),d===null))return this;var N=Math.abs(d)<=16?60*d:d,_=this;if(T)return _.$offset=N,_.$u=d===0,_;if(d!==0){var X=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(_=this.local().add(N+X,r)).$offset=N,_.$x.$localOffset=X}else _=this.utc();return _};var f=s.format;s.format=function(d){var T=d||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,T)},s.valueOf=function(){var d=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*d},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var y=s.toDate;s.toDate=function(d){return d==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():y.call(this)};var g=s.diff;s.diff=function(d,T,S){if(d&&this.$u===d.$u)return g.call(this,d,T,S);var N=this.local(),_=o(d).local();return g.call(N,_,T,S)}}})})(fe);var ge=fe.exports;const ke=oe(ge);It.extend(ke);const Er=()=>It().add(7,"day").toISOString(),Te=e=>It(e).utc().format("dddd DD MMMM");var Ut=["MO","TU","WE","TH","FR","SA","SU"],P=function(){function e(t,r){if(r===0)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=r}return e.fromStr=function(t){return new e(Ut.indexOf(t))},e.prototype.nth=function(t){return this.n===t?this:new e(this.weekday,t)},e.prototype.equals=function(t){return this.weekday===t.weekday&&this.n===t.n},e.prototype.toString=function(){var t=Ut[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t},e.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},e}(),A=function(e){return e!=null},Q=function(e){return typeof e=="number"},Pt=function(e){return typeof e=="string"&&Ut.includes(e)},q=Array.isArray,tt=function(e,t){t===void 0&&(t=e),arguments.length===1&&(t=e,e=0);for(var r=[],n=e;n<t;n++)r.push(n);return r},x=function(e,t){var r=0,n=[];if(q(e))for(;r<t;r++)n[r]=[].concat(e);else for(;r<t;r++)n[r]=e;return n},Ee=function(e){return q(e)?e:[e]};function lt(e,t,r){r===void 0&&(r=" ");var n=String(e);return t=t>>0,n.length>t?String(n):(t=t-n.length,t>r.length&&(r+=x(r,t/r.length)),r.slice(0,t)+String(n))}var De=function(e,t,r){var n=e.split(t);return r?n.slice(0,r).concat([n.slice(r).join(t)]):n},G=function(e,t){var r=e%t;return r*t<0?r+t:r},Ot=function(e,t){return{div:Math.floor(e/t),mod:G(e,t)}},V=function(e){return!A(e)||e.length===0},W=function(e){return!V(e)},U=function(e,t){return W(e)&&e.indexOf(t)!==-1},ht=function(e,t,r,n,i,a){return n===void 0&&(n=0),i===void 0&&(i=0),a===void 0&&(a=0),new Date(Date.UTC(e,t-1,r,n,i,a))},Me=[31,28,31,30,31,30,31,31,30,31,30,31],he=1e3*60*60*24,ce=9999,le=ht(1970,1,1),Se=[6,0,1,2,3,4,5],gt=function(e){return e%4===0&&e%100!==0||e%400===0},de=function(e){return e instanceof Date},wt=function(e){return de(e)&&!isNaN(e.getTime())},xe=function(e,t){var r=e.getTime(),n=t.getTime(),i=r-n;return Math.round(i/he)},Lt=function(e){return xe(e,le)},ye=function(e){return new Date(le.getTime()+e*he)},Oe=function(e){var t=e.getUTCMonth();return t===1&&gt(e.getUTCFullYear())?29:Me[t]},yt=function(e){return Se[e.getUTCDay()]},Kt=function(e,t){var r=ht(e,t+1,1);return[yt(r),Oe(r)]},pe=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},$t=function(e){var t=new Date(e.getTime());return t},Ft=function(e){for(var t=[],r=0;r<e.length;r++)t.push($t(e[r]));return t},kt=function(e){e.sort(function(t,r){return t.getTime()-r.getTime()})},Ct=function(e,t){t===void 0&&(t=!0);var r=new Date(e);return[lt(r.getUTCFullYear().toString(),4,"0"),lt(r.getUTCMonth()+1,2,"0"),lt(r.getUTCDate(),2,"0"),"T",lt(r.getUTCHours(),2,"0"),lt(r.getUTCMinutes(),2,"0"),lt(r.getUTCSeconds(),2,"0"),t?"Z":""].join("")},Rt=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,r=t.exec(e);if(!r)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[5],10)||0,parseInt(r[6],10)||0,parseInt(r[7],10)||0))},qt=function(e,t){var r=e.toLocaleString("sv-SE",{timeZone:t});return r.replace(" ","T")+"Z"},Ye=function(e,t){var r=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(qt(e,r)),i=new Date(qt(e,t??"UTC")),a=i.getTime()-n.getTime();return new Date(e.getTime()-a)},dt=function(){function e(t,r){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=r,t==="between"?(this.maxDate=r.inc?r.before:new Date(r.before.getTime()-1),this.minDate=r.inc?r.after:new Date(r.after.getTime()+1)):t==="before"?this.maxDate=r.inc?r.dt:new Date(r.dt.getTime()-1):t==="after"&&(this.minDate=r.inc?r.dt:new Date(r.dt.getTime()+1))}return e.prototype.accept=function(t){++this.total;var r=this.minDate&&t<this.minDate,n=this.maxDate&&t>this.maxDate;if(this.method==="between"){if(r)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return r?!0:(this.add(t),!1);return this.add(t)},e.prototype.add=function(t){return this._result.push(t),!0},e.prototype.getValue=function(){var t=this._result;switch(this.method){case"all":case"between":return t;case"before":case"after":default:return t.length?t[t.length-1]:null}},e.prototype.clone=function(){return new e(this.method,this.args)},e}(),_t=function(e,t){return _t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},_t(e,t)};function Wt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");_t(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Z=function(){return Z=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Z.apply(this,arguments)};function c(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var Zt=function(e){Wt(t,e);function t(r,n,i){var a=e.call(this,r,n)||this;return a.iterator=i,a}return t.prototype.add=function(r){return this.iterator(r,this._result.length)?(this._result.push(r),!0):!1},t}(dt),Dt={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Bt=function(e,t){return e.indexOf(t)!==-1},Ue=function(e){return e.toString()},Le=function(e,t,r){return"".concat(t," ").concat(r,", ").concat(e)},rt=function(){function e(t,r,n,i){if(r===void 0&&(r=Ue),n===void 0&&(n=Dt),i===void 0&&(i=Le),this.text=[],this.language=n||Dt,this.gettext=r,this.dateFormatter=i,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),u=[].concat(this.options.bynmonthday);a.sort(function(l,p){return l-p}),u.sort(function(l,p){return p-l}),this.bymonthday=a.concat(u),this.bymonthday.length||(this.bymonthday=null)}if(A(this.origOptions.byweekday)){var o=q(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],s=String(o);this.byweekday={allWeeks:o.filter(function(l){return!l.n}),someWeeks:o.filter(function(l){return!!l.n}),isWeekdays:s.indexOf("MO")!==-1&&s.indexOf("TU")!==-1&&s.indexOf("WE")!==-1&&s.indexOf("TH")!==-1&&s.indexOf("FR")!==-1&&s.indexOf("SA")===-1&&s.indexOf("SU")===-1,isEveryDay:s.indexOf("MO")!==-1&&s.indexOf("TU")!==-1&&s.indexOf("WE")!==-1&&s.indexOf("TH")!==-1&&s.indexOf("FR")!==-1&&s.indexOf("SA")!==-1&&s.indexOf("SU")!==-1};var h=function(l,p){return l.weekday-p.weekday};this.byweekday.allWeeks.sort(h),this.byweekday.someWeeks.sort(h),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return e.isFullyConvertible=function(t){var r=!0;if(!(t.options.freq in e.IMPLEMENTED)||t.origOptions.until&&t.origOptions.count)return!1;for(var n in t.origOptions){if(Bt(["dtstart","tzid","wkst","freq"],n))return!0;if(!Bt(e.IMPLEMENTED[t.options.freq],n))return!1}return r},e.prototype.isFullyConvertible=function(){return e.isFullyConvertible(this.rrule)},e.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[k.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var r=this.options.until;this.add(this.dateFormatter(r.getUTCFullYear(),this.language.monthNames[r.getUTCMonth()],r.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},e.prototype.HOURLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))},e.prototype.MINUTELY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("minutes"):t("minute"))},e.prototype.DAILY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},e.prototype.WEEKLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(this.options.interval===1&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},e.prototype.MONTHLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()},e.prototype.YEARLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))},e.prototype._bymonthday=function(){var t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))},e.prototype._byweekday=function(){var t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))},e.prototype._byhour=function(){var t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))},e.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},e.prototype.nth=function(t){t=parseInt(t.toString(),10);var r,n=this.gettext;if(t===-1)return n("last");var i=Math.abs(t);switch(i){case 1:case 21:case 31:r=i+n("st");break;case 2:case 22:r=i+n("nd");break;case 3:case 23:r=i+n("rd");break;default:r=i+n("th")}return t<0?r+" "+n("last"):r},e.prototype.monthtext=function(t){return this.language.monthNames[t-1]},e.prototype.weekdaytext=function(t){var r=Q(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[r]},e.prototype.plural=function(t){return t%100!==1},e.prototype.add=function(t){return this.text.push(" "),this.text.push(t),this},e.prototype.list=function(t,r,n,i){var a=this;i===void 0&&(i=","),q(t)||(t=[t]);var u=function(s,h,l){for(var p="",f=0;f<s.length;f++)f!==0&&(f===s.length-1?p+=" "+l+" ":p+=h+" "),p+=s[f];return p};r=r||function(s){return s.toString()};var o=function(s){return r&&r.call(a,s)};return n?u(t.map(o),i,n):t.map(o).join(i+" ")},e}(),$e=function(){function e(t){this.done=!0,this.rules=t}return e.prototype.start=function(t){return this.text=t,this.done=!1,this.nextSymbol()},e.prototype.isDone=function(){return this.done&&this.symbol===null},e.prototype.nextSymbol=function(){var t,r;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;t=null;for(var i in this.rules){n=this.rules[i];var a=n.exec(this.text);a&&(t===null||a[0].length>t[0].length)&&(t=a,r=i)}if(t!=null&&(this.text=this.text.substr(t[0].length),this.text===""&&(this.done=!0)),t==null){this.done=!0,this.symbol=null,this.value=null;return}}while(r==="SKIP");return this.symbol=r,this.value=t,!0},e.prototype.accept=function(t){if(this.symbol===t){if(this.value){var r=this.value;return this.nextSymbol(),r}return this.nextSymbol(),!0}return!1},e.prototype.acceptNumber=function(){return this.accept("number")},e.prototype.expect=function(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)},e}();function ve(e,t){t===void 0&&(t=Dt);var r={},n=new $e(t.tokens);if(!n.start(e))return null;return i(),r;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(r.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":r.freq=k.DAILY,n.nextSymbol()&&(u(),p());break;case"weekday(s)":r.freq=k.WEEKLY,r.byweekday=[k.MO,k.TU,k.WE,k.TH,k.FR],n.nextSymbol(),u(),p();break;case"week(s)":r.freq=k.WEEKLY,n.nextSymbol()&&(a(),u(),p());break;case"hour(s)":r.freq=k.HOURLY,n.nextSymbol()&&(a(),p());break;case"minute(s)":r.freq=k.MINUTELY,n.nextSymbol()&&(a(),p());break;case"month(s)":r.freq=k.MONTHLY,n.nextSymbol()&&(a(),p());break;case"year(s)":r.freq=k.YEARLY,n.nextSymbol()&&(a(),p());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":r.freq=k.WEEKLY;var y=n.symbol.substr(0,2).toUpperCase();if(r.byweekday=[k[y]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var g=s();if(!g)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");r.byweekday.push(k[g]),n.nextSymbol()}u(),l(),p();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=k.YEARLY,r.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var d=o();if(!d)throw new Error("Unexpected symbol "+n.symbol+", expected month");r.bymonth.push(d),n.nextSymbol()}a(),p();break;default:throw new Error("Unknown symbol")}}function a(){var f=n.accept("on"),y=n.accept("the");if(f||y)do{var g=h(),d=s(),T=o();if(g)d?(n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(k[d].nth(g))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(g),n.accept("day(s)"));else if(d)n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(k[d]);else if(n.symbol==="weekday(s)")n.nextSymbol(),r.byweekday||(r.byweekday=[k.MO,k.TU,k.WE,k.TH,k.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var S=n.acceptNumber();if(!S)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(r.byweekno=[parseInt(S[0],10)];n.accept("comma");){if(S=n.acceptNumber(),!S)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.byweekno.push(parseInt(S[0],10))}}else if(T)n.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(T);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function u(){var f=n.accept("at");if(f)do{var y=n.acceptNumber();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(r.byhour=[parseInt(y[0],10)];n.accept("comma");){if(y=n.acceptNumber(),!y)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");r.byhour.push(parseInt(y[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function s(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function h(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function l(){n.accept("on"),n.accept("the");var f=h();if(f)for(r.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=h(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.bymonthday.push(f),n.nextSymbol()}}function p(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);r.until=new Date(f)}else n.accept("for")&&(r.count=parseInt(n.value[0],10),n.expect("number"))}}var O;(function(e){e[e.YEARLY=0]="YEARLY",e[e.MONTHLY=1]="MONTHLY",e[e.WEEKLY=2]="WEEKLY",e[e.DAILY=3]="DAILY",e[e.HOURLY=4]="HOURLY",e[e.MINUTELY=5]="MINUTELY",e[e.SECONDLY=6]="SECONDLY"})(O||(O={}));function Ht(e){return e<O.HOURLY}var _e=function(e,t){return t===void 0&&(t=Dt),new k(ve(e,t)||void 0)},pt=["count","until","interval","byweekday","bymonthday","bymonth"];rt.IMPLEMENTED=[];rt.IMPLEMENTED[O.HOURLY]=pt;rt.IMPLEMENTED[O.MINUTELY]=pt;rt.IMPLEMENTED[O.DAILY]=["byhour"].concat(pt);rt.IMPLEMENTED[O.WEEKLY]=pt;rt.IMPLEMENTED[O.MONTHLY]=pt;rt.IMPLEMENTED[O.YEARLY]=["byweekno","byyearday"].concat(pt);var Ae=function(e,t,r,n){return new rt(e,t,r,n).toString()},Ne=rt.isFullyConvertible,Mt=function(){function e(t,r,n,i){this.hour=t,this.minute=r,this.second=n,this.millisecond=i||0}return e.prototype.getHours=function(){return this.hour},e.prototype.getMinutes=function(){return this.minute},e.prototype.getSeconds=function(){return this.second},e.prototype.getMilliseconds=function(){return this.millisecond},e.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},e}(),Ie=function(e){Wt(t,e);function t(r,n,i,a,u,o,s){var h=e.call(this,a,u,o,s)||this;return h.year=r,h.month=n,h.day=i,h}return t.fromDate=function(r){return new this(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.valueOf()%1e3)},t.prototype.getWeekday=function(){return yt(new Date(this.getTime()))},t.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},t.prototype.getDay=function(){return this.day},t.prototype.getMonth=function(){return this.month},t.prototype.getYear=function(){return this.year},t.prototype.addYears=function(r){this.year+=r},t.prototype.addMonths=function(r){if(this.month+=r,this.month>12){var n=Math.floor(this.month/12),i=G(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},t.prototype.addWeekly=function(r,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+r*7:this.day+=-(this.getWeekday()-n)+r*7,this.fixDay()},t.prototype.addDaily=function(r){this.day+=r,this.fixDay()},t.prototype.addHours=function(r,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/r)*r);;){this.hour+=r;var a=Ot(this.hour,24),u=a.div,o=a.mod;if(u&&(this.hour=o,this.addDaily(u)),V(i)||U(i,this.hour))break}},t.prototype.addMinutes=function(r,n,i,a){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/r)*r);;){this.minute+=r;var u=Ot(this.minute,60),o=u.div,s=u.mod;if(o&&(this.minute=s,this.addHours(o,!1,i)),(V(i)||U(i,this.hour))&&(V(a)||U(a,this.minute)))break}},t.prototype.addSeconds=function(r,n,i,a,u){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/r)*r);;){this.second+=r;var o=Ot(this.second,60),s=o.div,h=o.mod;if(s&&(this.second=h,this.addMinutes(s,!1,i,a)),(V(i)||U(i,this.hour))&&(V(a)||U(a,this.minute))&&(V(u)||U(u,this.second)))break}},t.prototype.fixDay=function(){if(!(this.day<=28)){var r=Kt(this.year,this.month-1)[1];if(!(this.day<=r))for(;this.day>r;){if(this.day-=r,++this.month,this.month===13&&(this.month=1,++this.year,this.year>ce))return;r=Kt(this.year,this.month-1)[1]}}},t.prototype.add=function(r,n){var i=r.freq,a=r.interval,u=r.wkst,o=r.byhour,s=r.byminute,h=r.bysecond;switch(i){case O.YEARLY:return this.addYears(a);case O.MONTHLY:return this.addMonths(a);case O.WEEKLY:return this.addWeekly(a,u);case O.DAILY:return this.addDaily(a);case O.HOURLY:return this.addHours(a,n,o);case O.MINUTELY:return this.addMinutes(a,n,o,s);case O.SECONDLY:return this.addSeconds(a,n,o,s,h)}},t}(Mt);function me(e){for(var t=[],r=Object.keys(e),n=0,i=r;n<i.length;n++){var a=i[n];U(lr,a)||t.push(a),de(e[a])&&!wt(e[a])&&t.push(a)}if(t.length)throw new Error("Invalid options: "+t.join(", "));return Z({},e)}function Ce(e){var t=Z(Z({},jt),me(e));if(A(t.byeaster)&&(t.freq=k.YEARLY),!(A(t.freq)&&k.FREQUENCIES[t.freq]))throw new Error("Invalid frequency: ".concat(t.freq," ").concat(e.freq));if(t.dtstart||(t.dtstart=new Date(new Date().setMilliseconds(0))),A(t.wkst)?Q(t.wkst)||(t.wkst=t.wkst.weekday):t.wkst=k.MO.weekday,A(t.bysetpos)){Q(t.bysetpos)&&(t.bysetpos=[t.bysetpos]);for(var r=0;r<t.bysetpos.length;r++){var n=t.bysetpos[r];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(t.byweekno||W(t.byweekno)||W(t.byyearday)||t.bymonthday||W(t.bymonthday)||A(t.byweekday)||A(t.byeaster)))switch(t.freq){case k.YEARLY:t.bymonth||(t.bymonth=t.dtstart.getUTCMonth()+1),t.bymonthday=t.dtstart.getUTCDate();break;case k.MONTHLY:t.bymonthday=t.dtstart.getUTCDate();break;case k.WEEKLY:t.byweekday=[yt(t.dtstart)];break}if(A(t.bymonth)&&!q(t.bymonth)&&(t.bymonth=[t.bymonth]),A(t.byyearday)&&!q(t.byyearday)&&Q(t.byyearday)&&(t.byyearday=[t.byyearday]),!A(t.bymonthday))t.bymonthday=[],t.bynmonthday=[];else if(q(t.bymonthday)){for(var i=[],a=[],r=0;r<t.bymonthday.length;r++){var n=t.bymonthday[r];n>0?i.push(n):n<0&&a.push(n)}t.bymonthday=i,t.bynmonthday=a}else t.bymonthday<0?(t.bynmonthday=[t.bymonthday],t.bymonthday=[]):(t.bynmonthday=[],t.bymonthday=[t.bymonthday]);if(A(t.byweekno)&&!q(t.byweekno)&&(t.byweekno=[t.byweekno]),!A(t.byweekday))t.bynweekday=null;else if(Q(t.byweekday))t.byweekday=[t.byweekday],t.bynweekday=null;else if(Pt(t.byweekday))t.byweekday=[P.fromStr(t.byweekday).weekday],t.bynweekday=null;else if(t.byweekday instanceof P)!t.byweekday.n||t.freq>k.MONTHLY?(t.byweekday=[t.byweekday.weekday],t.bynweekday=null):(t.bynweekday=[[t.byweekday.weekday,t.byweekday.n]],t.byweekday=null);else{for(var u=[],o=[],r=0;r<t.byweekday.length;r++){var s=t.byweekday[r];if(Q(s)){u.push(s);continue}else if(Pt(s)){u.push(P.fromStr(s).weekday);continue}!s.n||t.freq>k.MONTHLY?u.push(s.weekday):o.push([s.weekday,s.n])}t.byweekday=W(u)?u:null,t.bynweekday=W(o)?o:null}return A(t.byhour)?Q(t.byhour)&&(t.byhour=[t.byhour]):t.byhour=t.freq<k.HOURLY?[t.dtstart.getUTCHours()]:null,A(t.byminute)?Q(t.byminute)&&(t.byminute=[t.byminute]):t.byminute=t.freq<k.MINUTELY?[t.dtstart.getUTCMinutes()]:null,A(t.bysecond)?Q(t.bysecond)&&(t.bysecond=[t.bysecond]):t.bysecond=t.freq<k.SECONDLY?[t.dtstart.getUTCSeconds()]:null,{parsedOptions:t}}function Re(e){var t=e.dtstart.getTime()%1e3;if(!Ht(e.freq))return[];var r=[];return e.byhour.forEach(function(n){e.byminute.forEach(function(i){e.bysecond.forEach(function(a){r.push(new Mt(n,i,a,t))})})}),r}function At(e){var t=e.split(`
`).map(We).filter(function(r){return r!==null});return Z(Z({},t[0]),t[1])}function St(e){var t={},r=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(e);if(!r)return t;var n=r[1],i=r[2];return n&&(t.tzid=n),t.dtstart=Rt(i),t}function We(e){if(e=e.replace(/^\s+|\s+$/,""),!e.length)return null;var t=/^([A-Z]+?)[:;]/.exec(e.toUpperCase());if(!t)return Gt(e);var r=t[1];switch(r.toUpperCase()){case"RRULE":case"EXRULE":return Gt(e);case"DTSTART":return St(e);default:throw new Error("Unsupported RFC prop ".concat(r," in ").concat(e))}}function Gt(e){var t=e.replace(/^RRULE:/i,""),r=St(t),n=e.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var a=i.split("="),u=a[0],o=a[1];switch(u.toUpperCase()){case"FREQ":r.freq=O[o.toUpperCase()];break;case"WKST":r.wkst=J[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var s=He(o),h=u.toLowerCase();r[h]=s;break;case"BYWEEKDAY":case"BYDAY":r.byweekday=je(o);break;case"DTSTART":case"TZID":var l=St(e);r.tzid=l.tzid,r.dtstart=l.dtstart;break;case"UNTIL":r.until=Rt(o);break;case"BYEASTER":r.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+u+"'")}}),r}function He(e){if(e.indexOf(",")!==-1){var t=e.split(",");return t.map(Jt)}return Jt(e)}function Jt(e){return/^[+-]?\d+$/.test(e)?Number(e):e}function je(e){var t=e.split(",");return t.map(function(r){if(r.length===2)return J[r];var n=r.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(r));var i=Number(n[1]),a=n[2],u=J[a].weekday;return new P(u,i)})}var xt=function(){function e(t,r){if(isNaN(t.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=t,this.tzid=r}return Object.defineProperty(e.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=Ct(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(t):";TZID=".concat(this.tzid,":").concat(t)},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.rezonedDate=function(){return this.isUTC?this.date:Ye(this.date,this.tzid)},e}();function Nt(e){for(var t=[],r="",n=Object.keys(e),i=Object.keys(jt),a=0;a<n.length;a++)if(n[a]!=="tzid"&&U(i,n[a])){var u=n[a].toUpperCase(),o=e[n[a]],s="";if(!(!A(o)||q(o)&&!o.length)){switch(u){case"FREQ":s=k.FREQUENCIES[e.freq];break;case"WKST":Q(o)?s=new P(o).toString():s=o.toString();break;case"BYWEEKDAY":u="BYDAY",s=Ee(o).map(function(y){return y instanceof P?y:q(y)?new P(y[0],y[1]):new P(y)}).toString();break;case"DTSTART":r=ze(o,e.tzid);break;case"UNTIL":s=Ct(o,!e.tzid);break;default:if(q(o)){for(var h=[],l=0;l<o.length;l++)h[l]=String(o[l]);s=h.toString()}else s=String(o)}s&&t.push([u,s])}}var p=t.map(function(y){var g=y[0],d=y[1];return"".concat(g,"=").concat(d.toString())}).join(";"),f="";return p!==""&&(f="RRULE:".concat(p)),[r,f].filter(function(y){return!!y}).join(`
`)}function ze(e,t){return e?"DTSTART"+new xt(new Date(e),t).toString():""}function Pe(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every(function(r,n){return r.getTime()===t[n].getTime()}):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():e===t}var Ke=function(){function e(){this.all=!1,this.before=[],this.after=[],this.between=[]}return e.prototype._cacheAdd=function(t,r,n){r&&(r=r instanceof Date?$t(r):Ft(r)),t==="all"?this.all=r:(n._value=r,this[t].push(n))},e.prototype._cacheGet=function(t,r){var n=!1,i=r?Object.keys(r):[],a=function(l){for(var p=0;p<i.length;p++){var f=i[p];if(!Pe(r[f],l[f]))return!0}return!1},u=this[t];if(t==="all")n=this.all;else if(q(u))for(var o=0;o<u.length;o++){var s=u[o];if(!(i.length&&a(s))){n=s._value;break}}if(!n&&this.all){for(var h=new dt(t,r),o=0;o<this.all.length&&h.accept(this.all[o]);o++);n=h.getValue(),this._cacheAdd(t,n,r)}return q(n)?Ft(n):n instanceof Date?$t(n):n},e}(),Fe=c(c(c(c(c(c(c(c(c(c(c(c(c([],x(1,31),!0),x(2,28),!0),x(3,31),!0),x(4,30),!0),x(5,31),!0),x(6,30),!0),x(7,31),!0),x(8,31),!0),x(9,30),!0),x(10,31),!0),x(11,30),!0),x(12,31),!0),x(1,7),!0),qe=c(c(c(c(c(c(c(c(c(c(c(c(c([],x(1,31),!0),x(2,29),!0),x(3,31),!0),x(4,30),!0),x(5,31),!0),x(6,30),!0),x(7,31),!0),x(8,31),!0),x(9,30),!0),x(10,31),!0),x(11,30),!0),x(12,31),!0),x(1,7),!0),Ze=tt(1,29),Be=tt(1,30),st=tt(1,31),j=tt(1,32),Ge=c(c(c(c(c(c(c(c(c(c(c(c(c([],j,!0),Be,!0),j,!0),st,!0),j,!0),st,!0),j,!0),j,!0),st,!0),j,!0),st,!0),j,!0),j.slice(0,7),!0),Je=c(c(c(c(c(c(c(c(c(c(c(c(c([],j,!0),Ze,!0),j,!0),st,!0),j,!0),st,!0),j,!0),j,!0),st,!0),j,!0),st,!0),j,!0),j.slice(0,7),!0),Xe=tt(-28,0),Qe=tt(-29,0),ot=tt(-30,0),z=tt(-31,0),Ve=c(c(c(c(c(c(c(c(c(c(c(c(c([],z,!0),Qe,!0),z,!0),ot,!0),z,!0),ot,!0),z,!0),z,!0),ot,!0),z,!0),ot,!0),z,!0),z.slice(0,7),!0),tr=c(c(c(c(c(c(c(c(c(c(c(c(c([],z,!0),Xe,!0),z,!0),ot,!0),z,!0),ot,!0),z,!0),z,!0),ot,!0),z,!0),ot,!0),z,!0),z.slice(0,7),!0),er=[0,31,60,91,121,152,182,213,244,274,305,335,366],rr=[0,31,59,90,120,151,181,212,243,273,304,334,365],Xt=function(){for(var e=[],t=0;t<55;t++)e=e.concat(tt(7));return e}();function nr(e,t){var r=ht(e,1,1),n=gt(e)?366:365,i=gt(e+1)?366:365,a=Lt(r),u=yt(r),o=Z(Z({yearlen:n,nextyearlen:i,yearordinal:a,yearweekday:u},ir(e)),{wnomask:null});if(V(t.byweekno))return o;o.wnomask=x(0,n+7);var s,h,l=s=G(7-u+t.wkst,7);l>=4?(l=0,h=o.yearlen+G(u-t.wkst,7)):h=n-l;for(var p=Math.floor(h/7),f=G(h,7),y=Math.floor(p+f/4),g=0;g<t.byweekno.length;g++){var d=t.byweekno[g];if(d<0&&(d+=y+1),d>0&&d<=y){var T=void 0;d>1?(T=l+(d-1)*7,l!==s&&(T-=7-s)):T=l;for(var S=0;S<7&&(o.wnomask[T]=1,T++,o.wdaymask[T]!==t.wkst);S++);}}if(U(t.byweekno,1)){var T=l+y*7;if(l!==s&&(T-=7-s),T<n)for(var g=0;g<7&&(o.wnomask[T]=1,T+=1,o.wdaymask[T]!==t.wkst);g++);}if(l){var N=void 0;if(U(t.byweekno,-1))N=-1;else{var _=yt(ht(e-1,1,1)),X=G(7-_.valueOf()+t.wkst,7),F=gt(e-1)?366:365,I=void 0;X>=4?(X=0,I=F+G(_-t.wkst,7)):I=n-l,N=Math.floor(52+G(I,7)/4)}if(U(t.byweekno,N))for(var T=0;T<l;T++)o.wnomask[T]=1}return o}function ir(e){var t=gt(e)?366:365,r=ht(e,1,1),n=yt(r);return t===365?{mmask:Fe,mdaymask:Je,nmdaymask:tr,wdaymask:Xt.slice(n),mrange:rr}:{mmask:qe,mdaymask:Ge,nmdaymask:Ve,wdaymask:Xt.slice(n),mrange:er}}function ar(e,t,r,n,i,a){var u={lastyear:e,lastmonth:t,nwdaymask:[]},o=[];if(a.freq===k.YEARLY)if(V(a.bymonth))o=[[0,r]];else for(var s=0;s<a.bymonth.length;s++)t=a.bymonth[s],o.push(n.slice(t-1,t+1));else a.freq===k.MONTHLY&&(o=[n.slice(t-1,t+1)]);if(V(o))return u;u.nwdaymask=x(0,r);for(var s=0;s<o.length;s++)for(var h=o[s],l=h[0],p=h[1]-1,f=0;f<a.bynweekday.length;f++){var y=void 0,g=a.bynweekday[f],d=g[0],T=g[1];T<0?(y=p+(T+1)*7,y-=G(i[y]-d,7)):(y=l+(T-1)*7,y+=G(7-i[y]+d,7)),l<=y&&y<=p&&(u.nwdaymask[y]=1)}return u}function sr(e,t){t===void 0&&(t=0);var r=e%19,n=Math.floor(e/100),i=e%100,a=Math.floor(n/4),u=n%4,o=Math.floor((n+8)/25),s=Math.floor((n-o+1)/3),h=Math.floor(19*r+n-a-s+15)%30,l=Math.floor(i/4),p=i%4,f=Math.floor(32+2*u+2*l-h-p)%7,y=Math.floor((r+11*h+22*f)/451),g=Math.floor((h+f-7*y+114)/31),d=(h+f-7*y+114)%31+1,T=Date.UTC(e,g-1,d+t),S=Date.UTC(e,0,1);return[Math.ceil((T-S)/(1e3*60*60*24))]}var or=function(){function e(t){this.options=t}return e.prototype.rebuild=function(t,r){var n=this.options;if(t!==this.lastyear&&(this.yearinfo=nr(t,n)),W(n.bynweekday)&&(r!==this.lastmonth||t!==this.lastyear)){var i=this.yearinfo,a=i.yearlen,u=i.mrange,o=i.wdaymask;this.monthinfo=ar(t,r,a,u,o,n)}A(n.byeaster)&&(this.eastermask=sr(t,n.byeaster))},Object.defineProperty(e.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),e.prototype.ydayset=function(){return[tt(this.yearlen),0,this.yearlen]},e.prototype.mdayset=function(t,r){for(var n=this.mrange[r-1],i=this.mrange[r],a=x(null,this.yearlen),u=n;u<i;u++)a[u]=u;return[a,n,i]},e.prototype.wdayset=function(t,r,n){for(var i=x(null,this.yearlen+7),a=Lt(ht(t,r,n))-this.yearordinal,u=a,o=0;o<7&&(i[a]=a,++a,this.wdaymask[a]!==this.options.wkst);o++);return[i,u,a]},e.prototype.ddayset=function(t,r,n){var i=x(null,this.yearlen),a=Lt(ht(t,r,n))-this.yearordinal;return i[a]=a,[i,a,a+1]},e.prototype.htimeset=function(t,r,n,i){var a=this,u=[];return this.options.byminute.forEach(function(o){u=u.concat(a.mtimeset(t,o,n,i))}),kt(u),u},e.prototype.mtimeset=function(t,r,n,i){var a=this.options.bysecond.map(function(u){return new Mt(t,r,u,i)});return kt(a),a},e.prototype.stimeset=function(t,r,n,i){return[new Mt(t,r,n,i)]},e.prototype.getdayset=function(t){switch(t){case O.YEARLY:return this.ydayset.bind(this);case O.MONTHLY:return this.mdayset.bind(this);case O.WEEKLY:return this.wdayset.bind(this);case O.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},e.prototype.gettimeset=function(t){switch(t){case O.HOURLY:return this.htimeset.bind(this);case O.MINUTELY:return this.mtimeset.bind(this);case O.SECONDLY:return this.stimeset.bind(this)}},e}();function ur(e,t,r,n,i,a){for(var u=[],o=0;o<e.length;o++){var s=void 0,h=void 0,l=e[o];l<0?(s=Math.floor(l/t.length),h=G(l,t.length)):(s=Math.floor((l-1)/t.length),h=G(l-1,t.length));for(var p=[],f=r;f<n;f++){var y=a[f];A(y)&&p.push(y)}var g=void 0;s<0?g=p.slice(s)[0]:g=p[s];var d=t[h],T=ye(i.yearordinal+g),S=pe(T,d);U(u,S)||u.push(S)}return kt(u),u}function be(e,t){var r=t.dtstart,n=t.freq,i=t.interval,a=t.until,u=t.bysetpos,o=t.count;if(o===0||i===0)return et(e);var s=Ie.fromDate(r),h=new or(t);h.rebuild(s.year,s.month);for(var l=cr(h,s,t);;){var p=h.getdayset(n)(s.year,s.month,s.day),f=p[0],y=p[1],g=p[2],d=hr(f,y,g,h,t);if(W(u))for(var T=ur(u,l,y,g,h,f),S=0;S<T.length;S++){var N=T[S];if(a&&N>a)return et(e);if(N>=r){var _=Qt(N,t);if(!e.accept(_)||o&&(--o,!o))return et(e)}}else for(var S=y;S<g;S++){var X=f[S];if(A(X))for(var F=ye(h.yearordinal+X),I=0;I<l.length;I++){var nt=l[I],N=pe(F,nt);if(a&&N>a)return et(e);if(N>=r){var _=Qt(N,t);if(!e.accept(_)||o&&(--o,!o))return et(e)}}}if(t.interval===0||(s.add(t,d),s.year>ce))return et(e);Ht(n)||(l=h.gettimeset(n)(s.hour,s.minute,s.second,0)),h.rebuild(s.year,s.month)}}function fr(e,t,r){var n=r.bymonth,i=r.byweekno,a=r.byweekday,u=r.byeaster,o=r.bymonthday,s=r.bynmonthday,h=r.byyearday;return W(n)&&!U(n,e.mmask[t])||W(i)&&!e.wnomask[t]||W(a)&&!U(a,e.wdaymask[t])||W(e.nwdaymask)&&!e.nwdaymask[t]||u!==null&&!U(e.eastermask,t)||(W(o)||W(s))&&!U(o,e.mdaymask[t])&&!U(s,e.nmdaymask[t])||W(h)&&(t<e.yearlen&&!U(h,t+1)&&!U(h,-e.yearlen+t)||t>=e.yearlen&&!U(h,t+1-e.yearlen)&&!U(h,-e.nextyearlen+t-e.yearlen))}function Qt(e,t){return new xt(e,t.tzid).rezonedDate()}function et(e){return e.getValue()}function hr(e,t,r,n,i){for(var a=!1,u=t;u<r;u++){var o=e[u];a=fr(n,o,i),a&&(e[o]=null)}return a}function cr(e,t,r){var n=r.freq,i=r.byhour,a=r.byminute,u=r.bysecond;return Ht(n)?Re(r):n>=k.HOURLY&&W(i)&&!U(i,t.hour)||n>=k.MINUTELY&&W(a)&&!U(a,t.minute)||n>=k.SECONDLY&&W(u)&&!U(u,t.second)?[]:e.gettimeset(n)(t.hour,t.minute,t.second,t.millisecond)}var J={MO:new P(0),TU:new P(1),WE:new P(2),TH:new P(3),FR:new P(4),SA:new P(5),SU:new P(6)},jt={freq:O.YEARLY,dtstart:null,interval:1,wkst:J.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},lr=Object.keys(jt),k=function(){function e(t,r){t===void 0&&(t={}),r===void 0&&(r=!1),this._cache=r?null:new Ke,this.origOptions=me(t);var n=Ce(t).parsedOptions;this.options=n}return e.parseText=function(t,r){return ve(t,r)},e.fromText=function(t,r){return _e(t,r)},e.fromString=function(t){return new e(e.parseString(t)||void 0)},e.prototype._iter=function(t){return be(t,this.options)},e.prototype._cacheGet=function(t,r){return this._cache?this._cache._cacheGet(t,r):!1},e.prototype._cacheAdd=function(t,r,n){if(this._cache)return this._cache._cacheAdd(t,r,n)},e.prototype.all=function(t){if(t)return this._iter(new Zt("all",{},t));var r=this._cacheGet("all");return r===!1&&(r=this._iter(new dt("all",{})),this._cacheAdd("all",r)),r},e.prototype.between=function(t,r,n,i){if(n===void 0&&(n=!1),!wt(t)||!wt(r))throw new Error("Invalid date passed in to RRule.between");var a={before:r,after:t,inc:n};if(i)return this._iter(new Zt("between",a,i));var u=this._cacheGet("between",a);return u===!1&&(u=this._iter(new dt("between",a)),this._cacheAdd("between",u,a)),u},e.prototype.before=function(t,r){if(r===void 0&&(r=!1),!wt(t))throw new Error("Invalid date passed in to RRule.before");var n={dt:t,inc:r},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new dt("before",n)),this._cacheAdd("before",i,n)),i},e.prototype.after=function(t,r){if(r===void 0&&(r=!1),!wt(t))throw new Error("Invalid date passed in to RRule.after");var n={dt:t,inc:r},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new dt("after",n)),this._cacheAdd("after",i,n)),i},e.prototype.count=function(){return this.all().length},e.prototype.toString=function(){return Nt(this.origOptions)},e.prototype.toText=function(t,r,n){return Ae(this,t,r,n)},e.prototype.isFullyConvertibleToText=function(){return Ne(this)},e.prototype.clone=function(){return new e(this.origOptions)},e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],e.YEARLY=O.YEARLY,e.MONTHLY=O.MONTHLY,e.WEEKLY=O.WEEKLY,e.DAILY=O.DAILY,e.HOURLY=O.HOURLY,e.MINUTELY=O.MINUTELY,e.SECONDLY=O.SECONDLY,e.MO=J.MO,e.TU=J.TU,e.WE=J.WE,e.TH=J.TH,e.FR=J.FR,e.SA=J.SA,e.SU=J.SU,e.parseString=At,e.optionsToString=Nt,e}();function dr(e,t,r,n,i,a){var u={},o=e.accept;function s(f,y){r.forEach(function(g){g.between(f,y,!0).forEach(function(d){u[Number(d)]=!0})})}i.forEach(function(f){var y=new xt(f,a).rezonedDate();u[Number(y)]=!0}),e.accept=function(f){var y=Number(f);return isNaN(y)?o.call(this,f):!u[y]&&(s(new Date(y-1),new Date(y+1)),!u[y])?(u[y]=!0,o.call(this,f)):!0},e.method==="between"&&(s(e.args.after,e.args.before),e.accept=function(f){var y=Number(f);return u[y]?!0:(u[y]=!0,o.call(this,f))});for(var h=0;h<n.length;h++){var l=new xt(n[h],a).rezonedDate();if(!e.accept(new Date(l.getTime())))break}t.forEach(function(f){be(e,f.options)});var p=e._result;switch(kt(p),e.method){case"all":case"between":return p;case"before":return p.length&&p[p.length-1]||null;case"after":default:return p.length&&p[0]||null}}var Vt={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function yr(e,t){var r=[],n=[],i=[],a=[],u=St(e),o=u.dtstart,s=u.tzid,h=wr(e,t.unfold);return h.forEach(function(l){var p;if(l){var f=br(l),y=f.name,g=f.parms,d=f.value;switch(y.toUpperCase()){case"RRULE":if(g.length)throw new Error("unsupported RRULE parm: ".concat(g.join(",")));r.push(At(l));break;case"RDATE":var T=(p=/RDATE(?:;TZID=([^:=]+))?/i.exec(l))!==null&&p!==void 0?p:[],S=T[1];S&&!s&&(s=S),n=n.concat(ee(d,g));break;case"EXRULE":if(g.length)throw new Error("unsupported EXRULE parm: ".concat(g.join(",")));i.push(At(d));break;case"EXDATE":a=a.concat(ee(d,g));break;case"DTSTART":break;default:throw new Error("unsupported property: "+y)}}}),{dtstart:o,tzid:s,rrulevals:r,rdatevals:n,exrulevals:i,exdatevals:a}}function pr(e,t){var r=yr(e,t),n=r.rrulevals,i=r.rdatevals,a=r.exrulevals,u=r.exdatevals,o=r.dtstart,s=r.tzid,h=t.cache===!1;if(t.compatible&&(t.forceset=!0,t.unfold=!0),t.forceset||n.length>1||i.length||a.length||u.length){var l=new kr(h);return l.dtstart(o),l.tzid(s||void 0),n.forEach(function(f){l.rrule(new k(Yt(f,o,s),h))}),i.forEach(function(f){l.rdate(f)}),a.forEach(function(f){l.exrule(new k(Yt(f,o,s),h))}),u.forEach(function(f){l.exdate(f)}),t.compatible&&t.dtstart&&l.rdate(o),l}var p=n[0]||{};return new k(Yt(p,p.dtstart||t.dtstart||o,p.tzid||t.tzid||s),h)}function te(e,t){return t===void 0&&(t={}),pr(e,vr(t))}function Yt(e,t,r){return Z(Z({},e),{dtstart:t,tzid:r})}function vr(e){var t=[],r=Object.keys(e),n=Object.keys(Vt);if(r.forEach(function(i){U(n,i)||t.push(i)}),t.length)throw new Error("Invalid options: "+t.join(", "));return Z(Z({},Vt),e)}function mr(e){if(e.indexOf(":")===-1)return{name:"RRULE",value:e};var t=De(e,":",1),r=t[0],n=t[1];return{name:r,value:n}}function br(e){var t=mr(e),r=t.name,n=t.value,i=r.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function wr(e,t){if(t===void 0&&(t=!1),e=e&&e.trim(),!e)throw new Error("Invalid empty string");if(!t)return e.split(/\s/);for(var r=e.split(`
`),n=0;n<r.length;){var i=r[n]=r[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(r[n-1]+=i.slice(1),r.splice(n,1)):n+=1:r.splice(n,1)}return r}function gr(e){e.forEach(function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)})}function ee(e,t){return gr(t),e.split(",").map(function(r){return Rt(r)})}function re(e){var t=this;return function(r){if(r!==void 0&&(t["_".concat(e)]=r),t["_".concat(e)]!==void 0)return t["_".concat(e)];for(var n=0;n<t._rrule.length;n++){var i=t._rrule[n].origOptions[e];if(i)return i}}}var kr=function(e){Wt(t,e);function t(r){r===void 0&&(r=!1);var n=e.call(this,{},r)||this;return n.dtstart=re.apply(n,["dtstart"]),n.tzid=re.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return t.prototype._iter=function(r){return dr(r,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},t.prototype.rrule=function(r){ne(r,this._rrule)},t.prototype.exrule=function(r){ne(r,this._exrule)},t.prototype.rdate=function(r){ie(r,this._rdate)},t.prototype.exdate=function(r){ie(r,this._exdate)},t.prototype.rrules=function(){return this._rrule.map(function(r){return te(r.toString())})},t.prototype.exrules=function(){return this._exrule.map(function(r){return te(r.toString())})},t.prototype.rdates=function(){return this._rdate.map(function(r){return new Date(r.getTime())})},t.prototype.exdates=function(){return this._exdate.map(function(r){return new Date(r.getTime())})},t.prototype.valueOf=function(){var r=[];return!this._rrule.length&&this._dtstart&&(r=r.concat(Nt({dtstart:this._dtstart}))),this._rrule.forEach(function(n){r=r.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){r=r.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&r.push(ae("RDATE",this._rdate,this.tzid())),this._exdate.length&&r.push(ae("EXDATE",this._exdate,this.tzid())),r},t.prototype.toString=function(){return this.valueOf().join(`
`)},t.prototype.clone=function(){var r=new t(!!this._cache);return this._rrule.forEach(function(n){return r.rrule(n.clone())}),this._exrule.forEach(function(n){return r.exrule(n.clone())}),this._rdate.forEach(function(n){return r.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return r.exdate(new Date(n.getTime()))}),r},t}(k);function ne(e,t){if(!(e instanceof k))throw new TypeError(String(e)+" is not RRule instance");U(t.map(String),String(e))||t.push(e)}function ie(e,t){if(!(e instanceof Date))throw new TypeError(String(e)+" is not Date instance");U(t.map(Number),Number(e))||(t.push(e),kt(t))}function ae(e,t,r){var n=!r||r.toUpperCase()==="UTC",i=n?"".concat(e,":"):"".concat(e,";TZID=").concat(r,":"),a=t.map(function(u){return Ct(u.valueOf(),n)}).join(",");return"".concat(i).concat(a)}const Tr=e=>{const t=new Map;for(const r of e){const n=r.name,i=t.get(n)||[];i.push(r),t.set(n,i)}return Object.fromEntries(t)},Dr=(e,t,r)=>{Array.isArray(e)||console.log("Database error");const n=new Map,i=e;for(const u of i){const o=Te(u.date),s=n.get(o)||[];s.push(u),n.set(o,s)}const a=[];return n.forEach((u,o)=>{a.push({[o]:Tr(u)})}),a},Mr=e=>Object.entries(e).flatMap(([t,r])=>Object.entries(r).map(([n,i])=>({date:t,type:n,rides:i})));export{Dr as a,Te as f,Er as g,Mr as u};
